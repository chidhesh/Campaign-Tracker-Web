<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Campaign Tracker</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <script>
    // Auth check: verify token if present, but don't force-redirect guests.
    // This allows the dashboard and campaigns table to be visible to unauthenticated users.
    (async function(){
      try {
        const params = new URLSearchParams(location.search);
        const token = sessionStorage.getItem('authToken');

        // If a token exists, verify it with the server. If verification fails, remove it.
        if (token) {
          try {
            const res = await fetch('/api/verify', { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify({ token }) });
            if (!res.ok) throw new Error('Invalid token');
            const json = await res.json();
            if (!json || !json.valid) throw new Error('Invalid token');
          } catch (err) {
            console.warn('Token invalid, clearing stored token', err);
            sessionStorage.removeItem('authToken');
          }
        } else {
          // No token: continue as guest (do not redirect). Login page remains available at /login.html.
          console.info('No auth token found; continuing as guest.');
        }

        // if redirected after login, show a temporary success message
        if (params.get('login') === 'success') {
          setTimeout(() => alert('Login successfully'), 200);
          history.replaceState({}, '', location.pathname);
        }
      } catch (e) { console.warn('Auth check failed', e); }
    })();
  </script>

  <!-- Navigation -->
  <nav class="navbar">
    <div class="logo"> <img src="images/logo.png" alt="Logo" class="logo-img" width="50" height="50"><span>Campaign Tracker</span></div>
    <ul class="nav-links">
      <li><a href="#home">Home</a></li>
      <li><a href="#campaignTable">Campaigns</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#contact">Contact</a></li>
      <li><a href="dashboard.html">Dashboard</a></li>
    </ul>
  </nav>

  <!-- Hero Section -->
  <section class="hero" id="home">
    <div class="hero-content">
      <h1>Manage Your Marketing <br /> Campaigns With Ease</h1>
      <p>Track, update, and analyze your campaigns efficiently in one place.</p>
      <a href="#contact" class="btn-primary">Know More</a>
    </div>
    <div class="hero-image">
      <img src="images/hero.png" alt="Marketing Illustration">
    </div>
  </section>

  <!-- Campaign Manager -->
 <section id="form-section">
    <h2>Add New Campaign</h2>
    <form id="campaignForm">
      <label>Campaign Name<input type="text" id="name" placeholder="Campaign Name" required /></label>
      <label>Client Name<input type="text" id="client" placeholder="Client Name" required /></label>
      <label>Start Date<input type="date" id="startDate" required /></label>
      <label>Status
      <select id="status">
        <option value="Active">Active</option>
        <option value="Paused">Paused</option>
        <option value="Completed">Completed</option>
      </select></label>
  <button id="btn" type="button">Add Campaign</button>
    </form>
  </section><br>

  <section class="about" id="about">
    <div class="about-left">
      <img src="images/image.png" alt="About background" />
    </div>
    <div class="about-right">
      <h2>About Us</h2>
      <p>Campaign Tracker is a web application designed to help marketing teams manage their campaigns effectively. With features like real-time tracking, status updates, and comprehensive analytics, Campaign Tracker simplifies the process of campaign management. Our platform empowers businesses to stay organized, monitor performance, and make data-driven decisions with ease.</p>

      <p>Whether you’re launching a new marketing initiative, managing multiple client campaigns, or analyzing outcomes, Campaign Tracker provides the tools you need to streamline operations and boost productivity. With an intuitive interface, responsive design, and secure data management, it’s the ultimate solution for modern marketing teams striving for excellence and transparency in every campaign.</p>
    </div>
  </section>
  <section id="list-section">
    <h2>All Campaigns</h2>
    <table id="campaignTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Client</th>
          <th>Start Date</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>
  <!-- Contact Section -->
  <section id="contact" class="contact-section">
    <div class="contact-grid">
      <div class="contact-left">
        <div class="contact-card contact-info">
          <h3>Get in touch</h3>
          <p>Have questions or want a demo? Send us a message and we'll get back within 24 hours.</p>
          <ul>
            <li><strong>Email:</strong> support@campaigntracker.example</li>
            <li><strong>Phone:</strong> +91 7975615953</li>
            <li><strong>Address:</strong> Bantwala, DK-574211</li>
          </ul>
        </div>

        <div class="contact-image" aria-hidden="false">
          <img src="images/customer-service.png" alt="support">
        </div>
      </div>

      <div class="contact-card contact-form">
        <h3>Contact Us</h3>
        <form id="contactForm">
          <label for="contactName">Name</label>
          <input type="text" id="contactName" name="name" placeholder="Your name" required />

          <label for="contactEmail">Email</label>
          <input type="email" id="contactEmail" name="email" placeholder="you@company.com" required />

          <label for="contactMessage">Message</label>
          <textarea id="contactMessage" name="message" rows="5" placeholder="How can we help?" required></textarea>

          <button type="button" id="contactSend">Send Message</button>
          <p id="contactStatus" style="margin-top:8px; color:var(--muted); display:none;"></p>
        </form>
      </div>
    </div>
  </section>
  <!-- Footer -->
  <footer>
    <p>© 2025 Campaign Tracker. All rights reserved.</p>
    <div class="footer-links">
      <a href="#">Privacy Policy</a> |
      <a href="#">Terms of Service</a>
    </div>
  </footer>

  <script src="script.js"></script>
</body>
</html>
